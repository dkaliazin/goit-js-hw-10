{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nconst datetimePicker = document.getElementById('datetime-picker');\nconst startButton = document.getElementById('button[data-start]');\nconst timerDisplay = document.getElementById('timer');\nlet userSelectedDate;\nlet countdownInterval;\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n   onClose(selectedDates) {\n    const selectedDate = selectedDates[0];\n    if (selectedDate <= new Date()) {\n      alert(\"Please choose a date in the future\");\n      startButton.disabled = true;\n    } else {\n        userSelectedDate = selectedDate;\n      startButton.disabled = false;\n    }\n  },\n};\n\nflatpickr(datetimePicker, options);\n  startButton.addEventListener('click', () => {\n    if (userSelectedDate) {\n      startCountdown(userSelectedDate);\n      //startButton.disabled = true;\n      //datetimePicker.disabled = true;\n    }\n  });\n\n  function startCountdown(endDate) {\n    clearInterval(countdownInterval);\n    countdownInterval = setInterval(() => {\n      const now = new Date();\n      const timeLeft = endDate - now;\n\n      if (timeLeft <= 0) {\n        clearInterval(countdownInterval);\n        updateTimerDisplay(0, 0, 0, 0);\n        datetimePicker.disabled = false;\n        startButton.disabled = true;\n        iziToast.success({\n          title: 'Finished',\n          message: 'Countdown has ended!',\n        });\n        return;\n      }\n\n      const time = convertMs(timeLeft);\n      updateTimerDisplay(time.days, time.hours, time.minutes, time.seconds);\n    }, 1000);\n  }\n\n  function convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor((ms % hour) / minute);\n    const seconds = Math.floor((ms % minute) / second);\n\n    return { days, hours, minutes, seconds };\n  }\n\n  function updateTimerDisplay(days, hours, minutes, seconds) {\n    timerDisplay.querySelector('[data-days]').textContent = String(days).padStart(2, '0');\n    timerDisplay.querySelector('[data-hours]').textContent = String(hours).padStart(2, '0');\n    timerDisplay.querySelector('[data-minutes]').textContent = String(minutes).padStart(2, '0');\n    timerDisplay.querySelector('[data-seconds]').textContent = String(seconds).padStart(2, '0');\n};"],"names":["datetimePicker","startButton","timerDisplay","userSelectedDate","countdownInterval","options","selectedDates","selectedDate","flatpickr","startCountdown","endDate","timeLeft","updateTimerDisplay","iziToast","time","convertMs","ms","days","hours","minutes","seconds"],"mappings":"2FAIA,MAAMA,EAAiB,SAAS,eAAe,iBAAiB,EAC1DC,EAAc,SAAS,eAAe,oBAAoB,EAC1DC,EAAe,SAAS,eAAe,OAAO,EACpD,IAAIC,EACAC,EACJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EAChB,QAAQC,EAAe,CACtB,MAAMC,EAAeD,EAAc,CAAC,EAChCC,GAAgB,IAAI,MACtB,MAAM,oCAAoC,EAC1CN,EAAY,SAAW,KAErBE,EAAmBI,EACrBN,EAAY,SAAW,GAE1B,CACH,EAEAO,EAAUR,EAAgBK,CAAO,EAC/BJ,EAAY,iBAAiB,QAAS,IAAM,CACtCE,GACFM,EAAeN,CAAgB,CAIrC,CAAG,EAED,SAASM,EAAeC,EAAS,CAC/B,cAAcN,CAAiB,EAC/BA,EAAoB,YAAY,IAAM,CAEpC,MAAMO,EAAWD,EADL,IAAI,KAGhB,GAAIC,GAAY,EAAG,CACjB,cAAcP,CAAiB,EAC/BQ,EAAmB,EAAG,EAAG,EAAG,CAAC,EAC7BZ,EAAe,SAAW,GAC1BC,EAAY,SAAW,GACvBY,EAAS,QAAQ,CACf,MAAO,WACP,QAAS,sBACnB,CAAS,EACD,MACD,CAED,MAAMC,EAAOC,EAAUJ,CAAQ,EAC/BC,EAAmBE,EAAK,KAAMA,EAAK,MAAOA,EAAK,QAASA,EAAK,OAAO,CACrE,EAAE,GAAI,CACR,CAED,SAASC,EAAUC,EAAI,CAMrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAOH,EAAK,KAAQ,GAAM,EACzCI,EAAU,KAAK,MAAOJ,EAAK,IAAU,GAAM,EAEjD,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAED,SAASR,EAAmBK,EAAMC,EAAOC,EAASC,EAAS,CACzDlB,EAAa,cAAc,aAAa,EAAE,YAAc,OAAOe,CAAI,EAAE,SAAS,EAAG,GAAG,EACpFf,EAAa,cAAc,cAAc,EAAE,YAAc,OAAOgB,CAAK,EAAE,SAAS,EAAG,GAAG,EACtFhB,EAAa,cAAc,gBAAgB,EAAE,YAAc,OAAOiB,CAAO,EAAE,SAAS,EAAG,GAAG,EAC1FjB,EAAa,cAAc,gBAAgB,EAAE,YAAc,OAAOkB,CAAO,EAAE,SAAS,EAAG,GAAG,CAC9F"}