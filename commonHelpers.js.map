{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nconst datetimePicker = document.getElementById('datetime-picker');\nconst startButton = document.querySelector('button[data-start]');\nstartButton.disabled = true;\nconst timerDisplay = document.getElementById('timer');\nlet userSelectedDate;\nlet countdownInterval;\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n   onClose(selectedDates) {\n    const selectedDate = selectedDates[0];\n    if (selectedDate <= new Date()) {\n      alert(\"Please choose a date in the future\");\n      startButton.disabled = true;\n    } else {\n        userSelectedDate = selectedDate;\n      startButton.disabled = false;\n    }\n  },\n};\n\nflatpickr(datetimePicker, options);\n  startButton.addEventListener('click', () => {\n    if (userSelectedDate) {\n      startCountdown(userSelectedDate);\n      //startButton.disabled = true;\n      //datetimePicker.disabled = true;\n    }\n  });\n\n  function startCountdown(endDate) {\n    clearInterval(countdownInterval);\n    countdownInterval = setInterval(() => {\n      const now = new Date();\n      const timeLeft = endDate - now;\n\n      if (timeLeft <= 0) {\n        clearInterval(countdownInterval);\n        updateTimerDisplay(0, 0, 0, 0);\n        datetimePicker.disabled = false;\n        startButton.disabled = true;\n        iziToast.success({\n          title: 'Finished',\n          message: 'Countdown has ended!',\n        });\n        return;\n      }\n\n      const time = convertMs(timeLeft);\n      updateTimerDisplay(time.days, time.hours, time.minutes, time.seconds);\n    }, 1000);\n  }\n\n  function convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor((ms % hour) / minute);\n    const seconds = Math.floor((ms % minute) / second);\n\n    return { days, hours, minutes, seconds };\n  }\nconst timeToUpdate = {\n    days: document.querySelector('[data-days]'),\n    hours: document.querySelector('[data-hours]'),\n    minutes: document.querySelector('[data-minutes]'),\n    seconds: document.querySelector('[data-seconds]'),\n}\nfunction addZero(number) {\n    return number.padStart(2, '0');\n}\nfunction updateTimerDisplay(days, hours, minutes, seconds) {\n    timeToUpdate.days.textContent = addZero(days.toString());\n    timeToUpdate.hours.textContent = addZero(hours.toString());\n    timeToUpdate.minutes.textContent = addZero(minutes.toString());\n    timeToUpdate.seconds.textContent = addZero(seconds.toString());\n};"],"names":["datetimePicker","startButton","userSelectedDate","countdownInterval","options","selectedDates","selectedDate","flatpickr","startCountdown","endDate","timeLeft","updateTimerDisplay","iziToast","time","convertMs","ms","days","hours","minutes","seconds","timeToUpdate","addZero","number"],"mappings":"2FAIA,MAAMA,EAAiB,SAAS,eAAe,iBAAiB,EAC1DC,EAAc,SAAS,cAAc,oBAAoB,EAC/DA,EAAY,SAAW,GACF,SAAS,eAAe,OAAO,EACpD,IAAIC,EACAC,EACJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EAChB,QAAQC,EAAe,CACtB,MAAMC,EAAeD,EAAc,CAAC,EAChCC,GAAgB,IAAI,MACtB,MAAM,oCAAoC,EAC1CL,EAAY,SAAW,KAErBC,EAAmBI,EACrBL,EAAY,SAAW,GAE1B,CACH,EAEAM,EAAUP,EAAgBI,CAAO,EAC/BH,EAAY,iBAAiB,QAAS,IAAM,CACtCC,GACFM,EAAeN,CAAgB,CAIrC,CAAG,EAED,SAASM,EAAeC,EAAS,CAC/B,cAAcN,CAAiB,EAC/BA,EAAoB,YAAY,IAAM,CAEpC,MAAMO,EAAWD,EADL,IAAI,KAGhB,GAAIC,GAAY,EAAG,CACjB,cAAcP,CAAiB,EAC/BQ,EAAmB,EAAG,EAAG,EAAG,CAAC,EAC7BX,EAAe,SAAW,GAC1BC,EAAY,SAAW,GACvBW,EAAS,QAAQ,CACf,MAAO,WACP,QAAS,sBACnB,CAAS,EACD,MACD,CAED,MAAMC,EAAOC,EAAUJ,CAAQ,EAC/BC,EAAmBE,EAAK,KAAMA,EAAK,MAAOA,EAAK,QAASA,EAAK,OAAO,CACrE,EAAE,GAAI,CACR,CAED,SAASC,EAAUC,EAAI,CAMrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAOH,EAAK,KAAQ,GAAM,EACzCI,EAAU,KAAK,MAAOJ,EAAK,IAAU,GAAM,EAEjD,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CACH,MAAMC,EAAe,CACjB,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CACpD,EACA,SAASC,EAAQC,EAAQ,CACrB,OAAOA,EAAO,SAAS,EAAG,GAAG,CACjC,CACA,SAASX,EAAmBK,EAAMC,EAAOC,EAASC,EAAS,CACvDC,EAAa,KAAK,YAAcC,EAAQL,EAAK,SAAQ,CAAE,EACvDI,EAAa,MAAM,YAAcC,EAAQJ,EAAM,SAAQ,CAAE,EACzDG,EAAa,QAAQ,YAAcC,EAAQH,EAAQ,SAAQ,CAAE,EAC7DE,EAAa,QAAQ,YAAcC,EAAQF,EAAQ,SAAQ,CAAE,CACjE"}